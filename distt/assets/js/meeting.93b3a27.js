console.log("Last modification time: 2019-11-7 11:05:48"),function(e){function t(t){for(var i,r,c=t[0],s=t[1],d=t[2],u=0,f=[];u<c.length;u++)r=c[u],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&f.push(o[r][0]),o[r]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);for(l&&l(t);f.length;)f.shift()();return a.push.apply(a,d||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(i=!1)}i&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},o={2:0},a=[];function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="./";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var l=s;a.push([17,0]),n()}([,,function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return r}));var i={"120p,120p_1":[160,120,15,65],"360p_4":[640,360,30,600],"480p_4":[640,480,30,750],"720p_3":[1280,720,30,1710]},o=1,a="1ec44debc2504419a025bf7acaf9d9f1",r="<#YOUR TEMP TOKEN HERE#>"},function(e,t,n){"use strict";var i,o=n(0),a=n.n(o),r=(i=function(e,t){e instanceof Array?e.map((function(e){return t(e)})):t(e)},{hide:function(e){i(e,(function(e){a()(e).hide()}))},show:function(e){i(e,(function(e){a()(e).show()}))},toggle:function(e){i(e,(function(e){a()(e).toggle()}))},enable:function(e){i(e,(function(e){a()(e).removeClass("disabled")}))},disable:function(e){i(e,(function(e){a()(e).addClass("disabled")}))}});t.a=r},,function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var i=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},o=function(){return window.innerWidth<=800&&window.innerHeight<=830},a=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)},r=function(){return"undefined"!=typeof InstallTrigger}},function(e,t,n){"use strict";n(20);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.a={init:function(e,t,n){this.MAX_RATIO=n,this.MIN_RATIO=t,this.canvas=document.querySelector("#".concat(e))},_checkRatio:function(e,t){var n=t/e;return!(n>this.MAX_RATIO||n<this.MIN_RATIO)},customRender:function(e,t,n){this.canvas.classList.remove("container__flex"),this.canvas.classList.add("container__grid");var i=e.length;n=n||e[e.length-1]&&e[e.length-1].getId(),i>4&&1===t||i>8?(t=0,console.log("Automatically switch to tile mode..."),this.rendererFactory(e,t,n)):this.rendererFactory(e,t,n)},rendererFactory:function(e,t,n){if(0===t)this.tileRenderer(e);else if(1===t)this.pipRenderer(e,n);else{if(2!==t)throw Error("Wrong mode for renderer");this.sharingRenderer(e,n)}},updateVideoItem:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.getId(),o=document.querySelector("#video-item-"+i);if(!o){o=document.createElement("section");var a=document.createElement("div");o.setAttribute("id","video-item-"+i),o.setAttribute("class","video-item"),a.setAttribute("class","video-item-box"),o.appendChild(a),this.canvas.appendChild(o),e.play("video-item-"+i)}n?o.classList.add("window__fit"):o.classList.remove("window__fit"),o.setAttribute("style",t)},enterFullScreen:function(){this.canvas.classList.add("fullscreen")},exitFullScreen:function(){this.canvas.classList.remove("fullscreen")},tileRenderer:function(e){var t=function(e){for(var t,n,i,o,a,r=e.width,c=e.height,s=e.minRatio,d=e.maxRatio,l=e.count,u=1;u<=l;u++){var f=u,h=Math.ceil(l/u);n=Math.floor((r-5)/h);var v=(i=Math.floor((c-5)/f))/n;v>d?i=(v=d)*n:v<s&&(n=i/(v=s));var p=n*i*l;(void 0===t||p>t)&&(t=p,a=i,o=n)}return{height:a,width:o}}({width:this.canvas.clientWidth,height:this.canvas.clientHeight,minRatio:this.MIN_RATIO,maxRatio:this.MAX_RATIO,count:e.length}),n=t.width,i=t.height;this.canvas.classList.remove("container__grid"),this.canvas.classList.add("container__flex");var o=!0,a=!1,r=void 0;try{for(var c,s=e[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var d=c.value;this.updateVideoItem(d,"width: ".concat(n,"px; height: ").concat(i,"px;"))}}catch(e){a=!0,r=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw r}}},pipRenderer:function(e,t){var n=e.length;if(n>4)throw Error("PIP mode only suitable for less than 4 stream");if(!this._checkRatio(4*this.canvas.clientWidth/24,3*this.canvas.clientHeight/12)||!this._checkRatio(12*this.canvas.clientWidth/24,12*this.canvas.clientHeight/12))return this.tileRenderer(e);for(var i=0,o=0;i<n;i++){var a=e[i];a.getId()===t?this.updateVideoItem(a,"grid-area: span 12/span 24/13/25"):(this.updateVideoItem(a,"grid-area: span 3/span 4/".concat(4+3*o,"/25;\n                    z-index:1;width:calc(100% - 20px);height:calc(100% - 20px)")),o++)}},sharingRenderer:function(e,t){var n=e.length;if(n>8)throw Error("Screen Sharing Mode only suitable for less than 8 stream");if(!this._checkRatio(4*this.canvas.clientWidth/24,4*this.canvas.clientHeight/12)&&1!==e.length){var o=e.findIndex((function(e){return e.getId()===t}));if(-1===o)throw Error("Cannot find stream by given mainId!");for(var a=0;a<n;a++)a!==o&&this.updateVideoItem(e[a],"display: none");return this.sharingRenderer([e[o]],t)}var r=i(e);if(8===n){var c=r.findIndex((function(e){return e.hasAudio()&&!e.hasVideo()}));-1===c&&(c=7);var s=r[c];this.updateVideoItem(s,"display: none"),r.splice(c,1)}var d=!0,l=!1,u=void 0;try{for(var f,h=r[Symbol.iterator]();!(d=(f=h.next()).done);d=!0){var v=f.value;v.getId()===t?1===n?this.updateVideoItem(v,"grid-area: span 12/span 24/13/25;",!0):n<5?this.updateVideoItem(v,"grid-area: span 12/span 20/13/25;",!0):this.updateVideoItem(v,"grid-area: span 12/span 16/13/21;",!0):this.updateVideoItem(v,"grid-area: span 4/span 4")}}catch(e){l=!0,u=e}finally{try{d||null==h.return||h.return()}finally{if(l)throw u}}}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var i=function(e,t,n){console.log("%c ".concat(e,": ").concat(n),"color: ".concat(t))},o={init:function(e,t){return function(n){return i(e,t,n)}}}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,i=new Array(n);n--;)i[n]=[t[n],e[t[n]]];return i})},,,function(e,t,n){"use strict";var i=n(0),o=n.n(i),a=function(){var e=o()(".notification-container");e.length||(o()("body").append('<div class="notification-container" \n                    style="z-index: 12;position: absolute;\n                    width: 38.2%;max-width: 450px; \n                    min-width: 300px;left: 0;\n                    word-break:break-all;\n                    bottom: 0;"></div>'),e=o()(".notification-container"));var t=function(t,n,i){var a=(new Date).getTime(),r='<div id="notify-'.concat(a,'" class="notification is-').concat(t,'">\n                                <button class="delete"></button>\n                                ').concat(n,"\n                            </div>");e.append(r),o()("#notify-"+a+" .delete").on("click",(function(){o()("#notify-"+a).remove()})),setTimeout((function(){o()("#notify-"+a).remove()}),i)};return{primary:function(e,n){t("primary",e,n)},link:function(e,n){t("link",e,n)},info:function(e,n){t("info",e,n)},success:function(e,n){t("success",e,n)},warning:function(e,n){t("warning",e,n)},danger:function(e,n){t("danger",e,n)}}}();t.a=a},,,,function(e,t,n){"use strict";n.r(t),function(e){var t,i,o=n(4),a=n.n(o),r=(n(11),n(0)),c=n.n(r),s=n(1),d=n(12),l=(n(8),n(9),n(19),n(3)),u=n(5),f=n(13),h=n(6),v=n(2),p=n(7),m=(n(10),{}),g={},b={},y=[],w=null,M=null,S=p.b.init("global","blue"),I=p.b.init("share","yellow"),R=p.b.init("local","green"),k=function(e,t){return new Promise((function(n,i){e.init(t.key,(function(){S("AgoraRTC client initialized");var o=v.b[t.videoProfileLow];e.join(t.token,t.channel,t.uid,(function(t){Object(p.a)(t,"brown","User ".concat(t," join channel successfully")),Object(p.a)(t,"brown",(new Date).toLocaleTimeString()),e.setLowStreamParameter({width:o[0],height:o[1],framerate:o[2],bitrate:o[3]}),n(t)}),(function(e){i(e)}))}))}))},O=function(e,t,n){var i={streamID:e,audio:!0,video:!0,screen:!1};switch(t.attendeeMode){case"audio-only":i.video=!1;break;case"audience":i.video=!1,i.audio=!1;break;default:case"video":}var o=a.a.createStream(Object(d.merge)(i,n));return o.setVideoProfile(t.videoProfile),o},_=function(){try{w&&w.unpublish(M),M&&M.close(),w&&w.leave((function(){I("Share client succeed to leave.")}),(function(){I("Share client failed to leave.")}))}finally{w=null,M=null}};window.installSuccess=function(){S.apply(void 0,arguments)},window.installError=function(){S.apply(void 0,arguments),f.a.danger("Failed to install the extension, please check the network and console.",3e3)};var T=function(e){y.map((function(t,n){return t.getId()===e?(y[n].close(),c()("#video-item-"+e).remove(),y.splice(n,1),1):0})),y.length<=4&&2!==m.displayMode&&l.a.enable(".displayModeBtn"),h.a.customRender(y,m.displayMode,t)},B=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.getId(),o=y.some((function(e){return e.getId()===i}));o||(n?y.push(e):y.unshift(e),y.length>4&&(m.displayMode=1===m.displayMode?0:m.displayMode,l.a.disable([".displayModeBtn",".disableRemoteBtn"])),h.a.customRender(y,m.displayMode,t))},x=function(e){return y.filter((function(t){return t.getId()===e}))[0]},A=function(e,t){if(e!==t){var n,i,o=!0,a=!1,r=void 0;try{for(var c,s=y[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var d=c.value,l=d.getId();l===e?n=d:l===t&&(i=d)}}catch(e){a=!0,r=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw r}}n&&g.setRemoteVideoStreamType(n,1),i&&g.setRemoteVideoStreamType(i,0)}};(function(e){switch(document.querySelector(".ag-header-lead span").innerHTML="AgoraWeb v".concat("^2.5.2".slice(1)),h.a.init("ag-canvas",9/16,1.6),Object(u.c)()&&h.a.enterFullScreen(),Object(u.b)()||Object(u.a)()||l.a.disable(".shareScreenBtn"),c()("#room-name").html(e.channel),e.attendeeMode){case"audio-only":l.a.hide([".videoControlBtn",".shareScreenBtn"]);break;case"audience":l.a.hide([".videoControlBtn",".audioControlBtn",".shareScreenBtn"]);break;default:case"video":}})(m=function(){var e={videoProfile:s.get("videoProfile").split(",")[0]||"480p_4",videoProfileLow:s.get("videoProfileLow"),cameraId:s.get("cameraId"),microphoneId:s.get("microphoneId"),channel:s.get("channel")||"test",transcode:s.get("transcode")||"interop",attendeeMode:s.get("attendeeMode")||"video",baseMode:s.get("baseMode")||"avc",displayMode:1,uid:void 0,resolution:void 0},t=v.b[s.get("videoProfile")];return e.resolution=t[0]/t[1]||4/3,e.key=v.a,e.token=v.d,e}()),g=a.a.createClient({mode:m.transcode}),c()(".displayModeBtn").on("click",(function(e){e.currentTarget.classList.contains("disabled")||y.length<=1||(1===m.displayMode?(m.displayMode=0,l.a.disable(".disableRemoteBtn")):0===m.displayMode&&(m.displayMode=1,l.a.enable(".disableRemoteBtn")),h.a.customRender(y,m.displayMode,t))})),c()(".exitBtn").on("click",(function(){try{w&&_(),g&&g.unpublish(b),b&&b.close(),g&&g.leave((function(){R("Client succeed to leave.")}),(function(){R("Client failed to leave.")}))}finally{window.location.href="index.html"}})),c()(".videoControlBtn").on("click",(function(){c()(".videoControlBtn").toggleClass("off"),b.isVideoOn()?b.disableVideo():b.enableVideo()})),c()(".audioControlBtn").on("click",(function(){c()(".audioControlBtn").toggleClass("off"),b.isAudioOn()?b.disableAudio():b.enableAudio()})),c()(".shareScreenBtn").on("click",(function(e){e.currentTarget.classList.contains("disabled")||(w?_():function(){l.a.disable(".shareScreenBtn"),w=a.a.createClient({mode:m.transcode});var e=Object(d.merge)(m,{uid:v.c});k(w,e).then((function(t){(M=O(t,e,{screen:!0,video:!1,audio:!1,extensionId:"minllpmhdgpndnkomcoccfekfegnlikg",mediaSource:"application"})).init((function(){l.a.enable(".shareScreenBtn"),M.on("stopScreenSharing",(function(){_(),I("Stop Screen Sharing at"+new Date)})),w.publish(M,(function(e){I("Publish share stream error: "+e),I("getUserMedia failed",e)}))}),(function(e){l.a.enable(".shareScreenBtn"),I("getUserMedia failed",e),_(),Object(u.a)()&&f.a.danger('\n            Please install chrome extension from \n            <a href="https://chrome.google.com/webstore/detail/minllpmhdgpndnkomcoccfekfegnlikg">Google Webstore</a> \n            before using sharing screen.   \n          ',5e3)}))}))}())})),c()(".disableRemoteBtn").on("click",(function(e){if(!(e.currentTarget.classList.contains("disabled")||y.length<=1)){c()(".disableRemoteBtn").toggleClass("off");var t=b.getId();Array.from(document.querySelectorAll(".video-item:not(#video-item-".concat(t,")"))).map((function(e){return"none"===e.style.display?(e.style.display="block",1):(e.style.display="none",0)}))}})),c()(window).resize((function(e){Object(u.c)()?h.a.enterFullScreen():h.a.exitFullScreen(),h.a.customRender(y,m.displayMode,t)})),c()(".ag-container").dblclick((function(e){for(var n=e.target;!n.classList.contains("video-item");)if((n=n.parentNode).classList.contains("ag-main"))return;var o=parseInt(n.id.split("-")[2],10);if(o!==t){var a=2===m.displayMode?v.c:o;A(t,a),i=x(t=a)}h.a.customRender(y,m.displayMode,t)})),c()(document).mousemove((function(t){e._toolbarToggle&&clearTimeout(e._toolbarToggle),c()(".ag-btn-group").addClass("active"),e._toolbarToggle=setTimeout((function(){c()(".ag-btn-group").removeClass("active")}),2500)})),g.on("stream-added",(function(e){var n=e.stream,o=n.getId();R("New stream added: "+o),R((new Date).toLocaleTimeString()),R("Subscribe ",n),o===v.c&&(m.displayMode=2,t=o,i=n,w||l.a.disable(".shareScreenBtn"),l.a.disable([".displayModeBtn",".disableRemoteBtn"])),o!==t&&(2===m.displayMode?g.setRemoteVideoStreamType(n,1):(i&&g.setRemoteVideoStreamType(i,1),i=n,t=o)),g.subscribe(n,(function(e){R("Subscribe stream failed",e)}))})),g.on("peer-leave",(function(e){var n=e.uid;if(R("Peer has left: "+n),R((new Date).toLocaleTimeString()),n===v.c&&(m.displayMode=0,"video"===m.attendeeMode&&l.a.enable(".shareScreenBtn"),l.a.enable([".displayModeBtn",".disableRemoteBtn"]),_()),n===t){var o=2===m.displayMode?v.c:b.getId();A(t,o),i=x(t=o)}T(e.uid)})),g.on("stream-subscribed",(function(e){var t=e.stream;R("Got stream-subscribed event"),R((new Date).toLocaleTimeString()),R("Subscribe remote stream successfully: "+t.getId()),B(t)})),g.on("stream-removed",(function(e){var n=e.stream,o=n.getId();if(R("Stream removed: "+o),R((new Date).toLocaleTimeString()),o===v.c&&(m.displayMode=0,"video"===m.attendeeMode&&l.a.enable(".shareScreenBtn"),l.a.enable([".displayModeBtn",".disableRemoteBtn"]),_()),o===t){var a=2===m.displayMode?v.c:b.getId();A(t,a),i=x(t=a)}T(n.getId())})),k(g,m).then((function(e){var n=Object(u.d)()?{}:{cameraId:m.cameraId,microphoneId:m.microphoneId};b=O(e,m,n),"audience"!==m.attendeeMode&&(t=e,i=b),g.enableDualStream((function(){R("Enable dual stream success!")}),(function(e){R(e)})),b.init((function(){"audience"!==m.attendeeMode&&(B(b,!0),g.publish(b,(function(e){R("Publish local stream error: "+e)})))}),(function(e){R("getUserMedia failed",e)}))}))}.call(this,n(14))},,function(e,t,n){},function(e,t,n){}]);